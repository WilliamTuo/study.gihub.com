<html>
<head>
  <title>数据库的操作</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600240 (zh-CN, DDL); Windows/6.1.1 (Win32);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="877"/>
<h1>数据库的操作</h1>

<div>
<span><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">1.创建数据库</span></font></div><div><br/></div><div> 语法： CREATE DATABASE [IF NOT EXISTS] db_name [create_specification[, create_specfication]...]</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>create_specification:</div><div>    [DEFAULT] CHARACTER SET charset_name</div><div>    [DEFAULT] COLLATE collation_name</div></div><div><br/></div><div>说明：</div><div>    1.大写 表示关键字</div><div>    2.[] 表示可选项</div><div>    3.CHARACTER SET：指定数据库采用的字符集</div><div>    4.COLLATE：指定数据库字符集的比较方式（默认 urf8_general_ci（不区分大小写）； utf8_general_bin（区分大小写）， 一般不指定），可能会影响到排序。</div><div>    5.查看默认字符集以及校验规则的命令为： </div><div>            show variables like 'character_set_database';</div><div>            show variables like 'collation_database';</div><div><br/></div><div><span style="font-weight: bold; font-size: 14pt;">2.操作数据库</span></div><div><span style="font-size: 10pt;">    1.查看数据库</span></div><div>        show databases;</div><div><br/></div><div><span style="font-size: 10pt;">    2.显示数据库创建语句</span></div><div><span style="font-size: 10pt;">        show create database 数据库名;</span></div><div><span style="font-size: 10pt;">        </span></div><div><span style="font-size: 10pt;">        说明：</span></div><div><span style="font-size: 10pt;">                1.MYSQL 建议关键字要使用大写， 但是不是必须的；</span></div><div><span style="font-size: 10pt;">                2.数据库名字的反引号``， 是为了防止使用的数据库名刚好是关键字；</span></div><div><span style="font-size: 10pt;">                3./*!40100 DEFAULT... */ 不是注释， 表示当前使用的mysql 版本大于 4.01 版本，就执行这句话。</span></div><div><br/></div><div><br/></div><div><span style="font-size: 10pt;">    3.数据库删除</span></div><div><span style="font-size: 10pt;">    </span></div><div><span style="font-size: 10pt;">        DROP DATABASE [IF EXISTS]db_name;</span></div><div><br/></div><div><span style="font-size: 10pt;">    4.查看当前 Mysql 数据库的连接情况 </span></div><div><br/></div><div><span style="font-size: 10pt;">        show processlist;</span></div><div><br/></div><div><span style="font-size: 10pt;">        可以告诉我们有哪些用户连接到我们的 MYSQL ，如果查出某个用户不是你正常登陆的，很有可能你的数据库被入侵了。当数据库运行比较慢时，可以用这个指令来看看数据库连接情况。</span></div><div><br/></div><div><br/></div><div><span style="font-size: 10pt;">    5.备份和还原数据库</span></div><div><br/></div><div><span style="font-size: 10pt;">        数据库备份基本语法： mysqldump -uroot -p 密码 数据库名 &gt; 数据库存放路径；</span></div><div><span style="font-size: 10pt;">            </span></div><div><span style="font-size: 10pt;">                其实是把整个建库，建表，导入数据的语句都装载到所给路径的文件中。    </span></div><div><br/></div><div><span style="font-size: 10pt;">        恢复数据库： </span></div><div><span style="font-size: 10pt;">                进入 MYSQL 控制台，先删除原来的库</span></div><div><span style="font-size: 10pt;">                要恢复数据库，必须先创建一个空的数据库，最好和以前的数据库名字一样。</span></div><div><br/></div><div><span style="font-size: 10pt;">        备份数据库注意事项：</span></div><div><span style="font-size: 10pt;">                1.如果备份的不是数据库，而是其中的表：</span></div><div><span style="font-size: 10pt;">                    </span><span style="font-size: 10pt;">mysqldump -uroot -p 密码 数据库名 表名1 表名2 &gt; 数据表存放路径(test2.bk);</span></div><div><span style="font-size: 10pt;">                2.恢复指定的表</span></div><div><span style="font-size: 10pt;">                    mysql &gt; source 备份文件的路径</span></div><div><span style="font-size: 10pt;">                3.在使用 source 恢复数据的时候，保证 use 对应的数据库 </span></div><div><span style="font-size: 10pt;">                4.同时备份多个数据库：</span></div><div><span style="font-size: 10pt;">                    </span><span style="font-size: 10pt;">mysqldump -uroot -p 密码</span> <span style="font-size: 10pt; font-weight: bold;">-B</span> <span style="font-size: 10pt;">数据库名1 数据库名2&gt; 数据库存放路径；</span><span style="font-size: 10pt;">                                             </span></div><div>                5.同时恢复多个数据库 </div><div>                    mysql &gt; source 备份的文件</div><div>                6.如果备份一个数据库的时候，也带上 <span style="font-weight: bold;">-B</span> 参数，在恢复数据库的时候，就不需要再创建空数据库。</div><div><br/></div><div><br/></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">3.修改库</span></span></div><div><span style="font-size: 10pt;">语法： ALTER DATABASE[IF EXISTS]db_database[alter_spacification[,alter_spacification]...]</span></div><div><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; font-weight: bold;">            </span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 18.6667px;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">alter_specification:</span></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    [DEFAULT] CHARACTER SET charset_name</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    [DEFAULT] COLLATE collation_name</span></div></div><div><span style="font-size: 10pt;">说明：</span></div><div><span style="font-size: 10pt;">    对数据库的删除主要指的是修改数据库的字符集，校验规则</span></div><div><br/></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">4.删除库</span></span></div><div><span style="font-size: 10pt;">     </span></div><div><span style="font-size: 10pt;">    drop database 数据库名;</span></div><div><br/></div><div><span style="font-size: 10pt;">    执行之后：</span></div><div><span style="font-size: 10pt;">        1.数据库内部看不到对应的数据库</span></div><div><span style="font-size: 10pt;">        2.对应的数据库文件夹被删除，级联删除，里面的数据表全部被删</span></div><div><br/></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">    注：不要随便删除数据库    </span></span></div><div><br/></div><div><br/></div></span>
</div></body></html> 